<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Resume</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
</head>
<body>
    <div class="container">
        <!-- PDF Viewer Toolbar -->
        <div class="pdf-toolbar">
            <div class="toolbar-left">
                <button id="prev-btn" class="toolbar-btn" title="Previous page">
                    <span class="arrow">←</span>
                </button>
                <div class="page-info">
                    <input type="number" id="page-input" min="1" value="1" class="page-input" title="Go to page">
                    <span class="page-separator">/</span>
                    <span id="total-pages" class="total-pages">1</span>
                </div>
                <button id="next-btn" class="toolbar-btn" title="Next page">
                    <span class="arrow">→</span>
                </button>
            </div>

            <div class="toolbar-center">
                <span class="filename">resume.pdf</span>
            </div>

            <div class="toolbar-right">
                <button id="zoom-out-btn" class="toolbar-btn" title="Zoom out">
                    <span>−</span>
                </button>
                <select id="zoom-select" class="zoom-select" title="Zoom level">
                    <option value="50">50%</option>
                    <option value="75">75%</option>
                    <option value="100" selected>100%</option>
                    <option value="125">125%</option>
                    <option value="150">150%</option>
                    <option value="200">200%</option>
                </select>
                <button id="zoom-in-btn" class="toolbar-btn" title="Zoom in">
                    <span>+</span>
                </button>
                <a href="resume.pdf" download class="toolbar-btn download-icon" title="Download PDF">
                    <span>⬇</span>
                </a>
            </div>
        </div>

        <!-- PDF Canvas Container -->
        <div id="pdf-canvas-container" class="pdf-canvas-container">
            <div id="pdf-error" class="pdf-error" style="display: none;"></div>
            <canvas id="pdf-canvas" class="pdf-canvas"></canvas>
        </div>
    </div>

    <script>
        // Set up PDF.js worker
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';

        // State
        let pdfDoc = null;
        let currentPage = 1;
        let currentScale = 1;

        const pdfPath = 'resume.pdf';
        const canvas = document.getElementById('pdf-canvas');
        const ctx = canvas.getContext('2d');
        const pageInput = document.getElementById('page-input');
        const totalPagesSpan = document.getElementById('total-pages');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const zoomSelect = document.getElementById('zoom-select');
        const zoomInBtn = document.getElementById('zoom-in-btn');
        const zoomOutBtn = document.getElementById('zoom-out-btn');
        const errorDiv = document.getElementById('pdf-error');

        // Load PDF document
        pdfjsLib.getDocument(pdfPath).promise.then(pdf => {
            pdfDoc = pdf;
            totalPagesSpan.textContent = pdf.numPages;
            pageInput.max = pdf.numPages;
            renderPage(currentPage);
        }).catch(error => {
            showError('Error loading PDF: ' + error.message);
        });

        // Render current page
        function renderPage(pageNum) {
            if (!pdfDoc) return;

            pdfDoc.getPage(pageNum).then(page => {
                const scale = currentScale;
                const viewport = page.getViewport({ scale });

                canvas.width = viewport.width;
                canvas.height = viewport.height;

                const renderContext = {
                    canvasContext: ctx,
                    viewport: viewport
                };

                page.render(renderContext).promise.catch(error => {
                    showError('Error rendering page: ' + error.message);
                });
            }).catch(error => {
                showError('Error loading page: ' + error.message);
            });
        }

        // Navigation handlers
        prevBtn.addEventListener('click', () => {
            if (currentPage > 1) {
                currentPage--;
                pageInput.value = currentPage;
                renderPage(currentPage);
            }
        });

        nextBtn.addEventListener('click', () => {
            if (currentPage < pdfDoc.numPages) {
                currentPage++;
                pageInput.value = currentPage;
                renderPage(currentPage);
            }
        });

        pageInput.addEventListener('change', () => {
            let page = parseInt(pageInput.value);
            if (isNaN(page) || page < 1) page = 1;
            if (page > pdfDoc.numPages) page = pdfDoc.numPages;
            currentPage = page;
            pageInput.value = currentPage;
            renderPage(currentPage);
        });

        // Zoom handlers
        zoomSelect.addEventListener('change', () => {
            const zoomLevel = parseInt(zoomSelect.value) / 100;
            currentScale = zoomLevel;
            renderPage(currentPage);
        });

        zoomInBtn.addEventListener('click', () => {
            const currentZoom = parseInt(zoomSelect.value);
            const options = [50, 75, 100, 125, 150, 200];
            const nextZoom = options.find(z => z > currentZoom) || 200;
            zoomSelect.value = nextZoom;
            currentScale = nextZoom / 100;
            renderPage(currentPage);
        });

        zoomOutBtn.addEventListener('click', () => {
            const currentZoom = parseInt(zoomSelect.value);
            const options = [50, 75, 100, 125, 150, 200];
            const nextZoom = [...options].reverse().find(z => z < currentZoom) || 50;
            zoomSelect.value = nextZoom;
            currentScale = nextZoom / 100;
            renderPage(currentPage);
        });

        // Error handling
        function showError(message) {
            errorDiv.textContent = message;
            errorDiv.style.display = 'block';
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowLeft') prevBtn.click();
            if (e.key === 'ArrowRight') nextBtn.click();
        });
    </script>
</body>
</html>